<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>仿淘宝造物节</title>
    <style type="text/css">
    .container {
        transform-style: preserve-3d;
        perspective: 400px;
        margin: 0 auto;
       
    }
		@keyframes myAnimate {
			from {
				transform: rotateY(0deg)
			}
			to {
				transform: rotateY(342deg)
			}
		}
    .box {
        margin: 0 auto;
        width: 129px;
        height: 129px;
        position: relative;
        transform-style: preserve-3d;
        animation-name: myAnimate;
        animation-timing-function: ease-in-out;
        animation-duration: 10s;
        animation-iteration-count: infinite;
        /* width: 8.0625rem; */
        /* transform: perspective(1000px) rotateX(0deg) rotateY(0deg) */
    }

    .piece {
        width: 129px;
        margin-top: 50px;
        height: 129px;
        border: 1px solid red;
        text-align: center;
        position: absolute;
    }
    </style>
</head>

<body style="background-image: url('./images/bg.jpg')">
    <div class="container">
        <div class="box" id="inner">
           <!-- <div class="piece piece-1">1</div>
           <div class="piece piece-2">2</div>
           <div class="piece piece-3">3</div>
           <div class="piece piece-4">4</div>
           <div class="piece piece-5">5</div>
           <div class="piece piece-6">6</div>
           <div class="piece piece-7">7</div>
           <div class="piece piece-8">8</div> -->
        </div>
    </div>
    <script type="text/javascript">
    window.onload = function() {
        const imgLen = 20
        

        const arrs = r = getRadius(129)

        function getRadius(imgW) {
            const halfW = imgW / 2;
            const deg = 360 / imgLen / 2
            const r = halfW / (Math.tan(deg * Math.PI / 180)).toFixed(3) // 半径距离
            return fixedR = r.toFixed(1)
        }
        console.log("半径R为" + r + 'px')

        const arr = []
        const wrapper = document.getElementById('inner')
        for (var i = 1; i <= imgLen; i++) {
            arr[i] = '<div class="piece piece-' + i + '"><img src="./images/p' + i + '.png"></div>'
            //arr[i] = '<div class="piece piece-' + i + '">' + i + '</div>'
        }
        wrapper.innerHTML = arr.join('')

        // 画3D
        const doms = wrapper.querySelectorAll('.piece')
        for (var j = 0; j < doms.length; j++) {
        	doms[j].style.transform = "rotateY(" + 360/imgLen * j + "deg) translateZ(" + r +"px)"; // 
        	// debugger
        }

        // document.querySelector('.piece-1').style.transform = "translateZ(" + r +"px)";
        // document.querySelector('.piece-2').style.transform = "rotateY(45deg) translateZ(" + r +"px)";
        // document.querySelector('.piece-3').style.transform = "rotateY(90deg) translateZ(" + r +"px)";
        // document.querySelector('.piece-4').style.transform = "rotateY(135deg) translateZ(" + r +"px)";
        // document.querySelector('.piece-5').style.transform = "rotateY(180deg) translateZ(" + r +"px)";
        // document.querySelector('.piece-6').style.transform = "rotateY(225deg) translateZ(" + r +"px)";
        // document.querySelector('.piece-7').style.transform = "rotateY(270deg) translateZ(" + r +"px)";
        // document.querySelector('.piece-8').style.transform = "rotateY(315deg) translateZ(" + r +"px)";
    }
    </script>
</body>

</html>